site:
  base_url: "https://www.helixcenter.org"
  allowed_domains: ["www.helixcenter.org", "helixcenter.org"]
  start_urls:
    - "https://www.helixcenter.org/roundtables/"
    - "https://www.helixcenter.org/participants/"
  start_paths: ["/roundtables/", "/participants/"]
  user_agent: "revweb/0.2.0 (+https://github.com/ORG/REPO)"
  respect_robots_txt: true

crawl:
  max_pages: 2000
  max_depth: 5
  include_query_params: false
  deny_patterns:
    - "/wp-admin"
    - "/wp-login"
    - "/wp-content/uploads"
    - "/feed"
    - "/comment-page"
    - ".*\\.(pdf|jpg|jpeg|png|gif|svg|mp3|mp4|wav)$"
    - "/donate"
    - "/contact"
    - "/about/board-of-directors"
    - "/about/executive-committee"
  emit_web_map_path: "./docs/web-map.md"

scrape:
  outputs_dir: "./data"
  speakers_csv: "speakers.csv"
  roundtables_csv: "roundtables.csv"
  discussions_csv_pattern: "discussion_{roundtable_id}.csv"
  only_roundtable_ids: []

patterns:
  # Match individual participant pages like /participants/mark-epstein/
  # Negative lookahead excludes:
  #   - Year-based listing pages like /participants/2012/
  #   - Single-letter alphabetical pages like /participants/A/
  speaker_url: ".*/participants/(?!\\d{4}/?$)(?![A-Z]/?$)[^/?#]+/?$"
  # Match individual roundtable pages like /roundtables/neurodiversity/
  # Negative lookahead excludes:
  #   - Year-based listing pages like /roundtables/2021/
  #   - Single-letter alphabetical pages like /roundtables/A/
  roundtable_url: ".*/roundtables/(?!\\d{4}/?$)(?![A-Z]/?$)[^/?#]+/?$"
  # No discussion pages on this site
  discussion_url: "^$"

selectors:
  speaker:
    id_from_url: true
    name: "h1::text, .entry-title::text"
    bio: ".entry-content p::text, article p::text, .wp-block-post-content p::text"
    title: ".entry-content p:first-of-type::text"
    organization: ""
    headshot_url: ".entry-content img::attr(src), article img::attr(src), .wp-block-image img::attr(src)"
    social_links: ""

  roundtable:
    id_from_url: true
    title: "h1::text, .entry-title::text"
    description: ".entry-content p::text, article p::text, .wp-block-post-content p::text"
    speaker_links: "a[href*='/participants/']"

  discussion:
    thread_title: "h1::text"
    posts: ".comment, .comment-body, li.comment"
    post_id: "::attr(id)"
    author: ".comment-author::text, .fn::text"
    posted_at: ".comment-metadata time::attr(datetime), time::text"
    content: ".comment-content p::text, .comment-content::text"
    permalink: ".comment-metadata a::attr(href)"

rendering:
  enable_playwright: "off"
  playwright:
    timeout_ms: 30000
    wait_until: "networkidle"

docs:
  tech_spec_path: "./docs/tech-spec-website.md"
